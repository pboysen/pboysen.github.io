!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function toRadians(degree){return degree*(Math.PI/180)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();require("../utils");createjs.MotionGuidePlugin.install(),createjs.Sound.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin,createjs.FlashAudioPlugin]);var ncontour=15,pixperkm=.25,knot=1.852,contour=[{degree:"<35",color:"#008080"},{degree:"40",color:"#08F"},{degree:"45",color:"#8FF"},{degree:"50",color:"#64E986"},{degree:"55",color:"#FFDB58"},{degree:"60",color:"#C68E17"},{degree:"65",color:"#CCC"},{degree:"70",color:"#AAA"},{degree:"75",color:"#888"},{degree:"80",color:"#844"},{degree:"85",color:"#F84"},{degree:"90",color:"#F88"},{degree:"95",color:"#F08"},{degree:"100",color:"#F00"},{degree:">100",color:"#444"}],city=[{name:"Des Moines, IA",x:383,y:142},{name:"Seattle, WA",x:63,y:31},{name:"Los Angeles, CA",x:47,y:228},{name:"Denver, CO",x:245,y:175},{name:"Dallas, TX",x:314,y:295},{name:"Chicago, IL",x:454,y:137},{name:"New York, NY",x:627,y:136},{name:"Atlanta, GA",x:528,y:268}],Settings=function(){function Settings(change){function slidef(e,input,out,f){e.stopPropagation(),out.value=input.valueAsNumber,f&&f(input)}var _this=this;_classCallCheck(this,Settings),this.wind=document.getElementById("wind"),this.windout=document.getElementById("windout"),this.wdir=document.getElementById("wdir"),this.duration=document.getElementById("duration"),this.durationout=document.getElementById("durationout"),this.spacing=document.getElementById("spacing"),this.mute=document.getElementById("mute"),this.listener=null;var event=/msie|trident/g.test(window.navigator.userAgent.toLowerCase())?"change":"input";this.wind.addEventListener(event,function(e){return slidef(e,_this.wind,_this.windout,_this.listener)}),this.duration.addEventListener(event,function(e){return slidef(e,_this.duration,_this.durationout,_this.listener)}),this.setWind(5),this.setDuration(5)}return _createClass(Settings,[{key:"addChangeListener",value:function(listener){this.wdir.addEventListener("change",function(e){e.stopPropagation(),listener&&listener.changeDir()}),this.spacing.addEventListener("change",function(e){e.stopPropagation(),listener&&listener.changeSpacing()})}},{key:"addMuteListener",value:function(listener){this.mute.addEventListener("click",function(e){e.stopPropagation(),listener&&listener.changeMute()})}},{key:"getWind",value:function(){return this.wind.valueAsNumber}},{key:"setWind",value:function(w){this.wind.value=w,this.windout.value=w}},{key:"getDir",value:function(){return parseInt(this.wdir.options[this.wdir.selectedIndex].value)}},{key:"getDuration",value:function(){return this.duration.valueAsNumber}},{key:"setDuration",value:function(d){this.duration.value=d,this.durationout.value=d}},{key:"getSpacing",value:function(){return parseInt(this.spacing.options[this.spacing.selectedIndex].value)}},{key:"getMute",value:function(){return this.mute.checked}},{key:"addListener",value:function(listener){this.listener=listener}}]),Settings}(),Buttons=function(){function Buttons(){_classCallCheck(this,Buttons),this.run=document.getElementById("run"),this.pause=document.getElementById("pause"),this.reset=document.getElementById("reset")}return _createClass(Buttons,[{key:"addListener",value:function(listener){this.run.addEventListener("click",function(e){return listener(e)}),this.pause.addEventListener("click",function(e){return listener(e)}),this.reset.addEventListener("click",function(e){return listener(e)})}}]),Buttons}(),Cities=function(){function Cities(stage,contours,dir){var _this2=this;_classCallCheck(this,Cities),this.contours=contours,this.temps=[],this.winds=[],city.forEach(function(c){var s=new createjs.Shape;s.graphics.setStrokeStyle(2).beginStroke("#000").beginFill("#000").drawCircle(c.x,c.y,2).endStroke(),stage.addChild(s);var t=new createjs.Text(c.name,"10px Arial","#000");t.x=c.x-20,t.y=c.y-30,stage.addChild(t);var temp=new createjs.Text("","10px Arial","#000");temp.x=c.x-15,temp.y=c.y-15,stage.addChild(temp),_this2.temps.push(temp);var wind=new createjs.Shape;stage.addChild(wind),_this2.winds.push(wind)}),this.updateTemps(),this.updateDir(dir)}return _createClass(Cities,[{key:"updateDir",value:function(dir){for(var radians=toRadians(dir),dx=Math.floor(10*Math.cos(radians)),dy=Math.floor(10*Math.sin(radians)),i=0;i<city.length;i++){var c=city[i],w=this.winds[i],x=Math.floor(c.x+dx),y=Math.floor(c.y+dy);w.graphics.clear().setStrokeStyle(2).beginStroke("#000").mt(c.x,c.y).lineTo(x,y).endStroke()}}},{key:"updateTemps",value:function(){for(var i=0;i<city.length;i++){var t=this.temps[i],c=city[i];t.text=this.contours.getDegrees(c.x,c.y)}}}]),Cities}(),Contours=function(){function Contours(stage,spacing){_classCallCheck(this,Contours),this.stage=stage,this.contours=new createjs.Container,stage.addChild(this.contours),this.render(spacing),this.reset()}return _createClass(Contours,[{key:"reset",value:function(){this.contours.x=0,this.contours.y=-50}},{key:"render",value:function(spacing){spacing/=4;for(var y=spacing/2+50,i=0;ncontour>i;i++){var c=new createjs.Shape;c.graphics.setStrokeStyle(spacing).beginStroke(contour[i].color).mt(-100,y).lt(800,y).endStroke(),this.contours.addChild(c),y+=spacing}}},{key:"getDegrees",value:function(x,y){for(var i=0;ncontour>i;i++){var c=this.contours.getChildAt(i);if(c.hitTest(x,y))return contour[i].degree}return contour[0].degree}},{key:"updateSpacing",value:function(spacing){this.contours.removeAllChildren(),this.render(spacing)}},{key:"move",value:function(dx,dy){this.contours.x+=dx,this.contours.y+=dy}}]),Contours}(),USMap=function(){function USMap(stage,settings,finish){_classCallCheck(this,USMap),this.stage=stage,this.settings=settings,this.finish=finish,this.time=0,this.dx=0,this.dy=0,this.settings.addChangeListener(this),this.map=new createjs.Bitmap("assets/usmap.jpg"),this.map.scaleY=.9,this.map.alpha=.3,this.contours=new Contours(stage,settings.getSpacing()),this.stage.addChild(this.map);for(var y=10,i=0;ncontour>i;i++){var r=new createjs.Shape;r.graphics.setStrokeStyle(1).beginStroke("#000").beginFill(contour[i].color).rect(670,y,30,25).endStroke();var t=new createjs.Text(contour[i].degree,"bold 10px Arial","#FFF");t.x=675,t.y=y+7,stage.addChild(r),stage.addChild(t),y+=25}this.cities=new Cities(stage,this.contours,settings.getDir()),this.updateVelocity()}return _createClass(USMap,[{key:"reset",value:function(){this.contours.reset(),this.time=0}},{key:"changeDir",value:function(){this.cities.updateDir(this.settings.getDir()),this.updateVelocity()}},{key:"changeSpacing",value:function(){this.contours.updateSpacing(this.settings.getSpacing()),this.cities.updateTemps(),this.updateVelocity()}},{key:"updateVelocity",value:function(){var radians=toRadians(this.settings.getDir()+180),speed=knot*pixperkm*this.settings.getWind();this.dx=speed*Math.cos(radians),this.dy=speed*Math.sin(radians)}},{key:"update",value:function(){return this.time>=this.settings.getDuration()?void(this.finish&&this.finish()):(this.contours.move(this.dx,this.dy),void this.time++)}}]),USMap}(),AdvectionSim=function(){function AdvectionSim(){var _this3=this;_classCallCheck(this,AdvectionSim),this.mainstage=new createjs.Stage("maincanvas"),this.buttons=new Buttons,this.settings=new Settings,this.usmap=new USMap(this.mainstage,this.settings,function(){_this3.buttons.reset.disabled=!1,_this3.buttons.pause.disabled=!0}),createjs.Sound.registerSound({id:"wind",src:"assets/wind.mp3"}),createjs.Sound.on("fileload",function(e){_this3.wind=createjs.Sound.play("wind",{loop:-1}),_this3.wind.paused=!0}),this.running=!1,this.buttons.addListener(function(e){switch(e.target.id){case"run":_this3.enablePlay(!1),_this3.buttons.pause.value="Pause",_this3.running=!0,_this3.usmap.updateVelocity(),_this3.playAudio(!0);break;case"pause":_this3.running=!_this3.running,e.target.value=_this3.running?"Pause":"Resume",_this3.playAudio(_this3.running);break;case"reset":_this3.reset(),_this3.playAudio(!1)}}),this.settings.addMuteListener(this)}return _createClass(AdvectionSim,[{key:"playAudio",value:function(value){this.settings.getMute()||(this.wind.paused=!value)}},{key:"changeMute",value:function(){this.settings.getMute()?this.wind.paused=!0:this.running&&(this.wind.paused=!1)}},{key:"reset",value:function(){this.enablePlay(!0),this.running=!1,this.usmap.reset()}},{key:"enablePlay",value:function(play){this.buttons.run.disabled=!play,this.buttons.pause.disabled=play}},{key:"run",value:function(){var _this4=this;this.settings.mute.checked=!1,this.buttons.run.disabled=!1,this.buttons.pause.disabled=!0,this.buttons.reset.disabled=!1,createjs.Ticker.framerate=1;var tick=0;createjs.Ticker.addEventListener("tick",function(e){_this4.running&&_this4.usmap.update(),_this4.mainstage.update(),tick++})}}]),AdvectionSim}();(new AdvectionSim).run()},{"../utils":4}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var marginX=40,marginY=30,endMargin=5;exports.Axis=function(){function Axis(spec){_classCallCheck(this,Axis),this.stage=spec.stage,this.w=spec.dim.w||100,this.h=spec.dim.h||100,this.min=spec.dim.min||0,this.max=spec.dim.max||100,this.font=spec.font||"12px Arial",this.color=spec.color||"#000",this.label=spec.label||"label",this.major=spec.major||10,this.minor=spec.minor||5,this.precision=spec.precision||0,this.vertical=spec.orient&&"vertical"==spec.orient||!1,this.linear=spec.scale&&"linear"==spec.scale||!1,this.originX=marginX,this.originY=this.h-marginY,this.scale=this.vertical?(this.originY-endMargin)/(this.max-this.min):(this.w-this.originX-endMargin)/(this.max-this.min)}return _createClass(Axis,[{key:"drawLine",value:function(x1,y1,x2,y2){var line=new createjs.Shape;line.graphics.setStrokeStyle(1),line.graphics.beginStroke(this.color),line.graphics.moveTo(x1,y1),line.graphics.lineTo(x2,y2),line.graphics.endStroke(),this.stage.addChild(line)}},{key:"drawText",value:function(text,x,y){return text.x=x,text.y=y,this.vertical&&text.text==this.label&&(text.rotation=270),this.stage.addChild(text),text}},{key:"getText",value:function(s){return new createjs.Text(s,this.font,this.color)}},{key:"render",value:function(){var label=this.getText(this.label),label_bnds=label.getBounds();if(this.vertical){this.drawLine(this.originX,this.originY,this.originX,endMargin);var y=this.originY-(this.originY-label_bnds.width)/2;this.drawText(label,4,y);for(var val=this.min;val<=this.max;val+=this.major){var v=this.getLoc(val);this.drawLine(this.originX-4,v,this.originX+4,v);var text=this.getText(val.toFixed(this.precision)),bnds=text.getBounds();this.drawText(text,this.originX-5-bnds.width,v+bnds.height/2-10)}for(var val=this.min;val<=this.max;val+=this.minor){var v=this.getLoc(val);this.drawLine(this.originX-2,v,this.originX+2,v)}}else{this.drawLine(this.originX,this.originY,this.w-endMargin,this.originY);var x=(this.w-endMargin-label_bnds.width)/2;this.drawText(label,this.originX+x,this.originY+15);for(var val=this.min;val<=this.max;val+=this.major){var v=this.getLoc(val);this.drawLine(v,this.originY-4,v,this.originY+4);var text=this.getText(val.toFixed(this.precision)),bnds=text.getBounds();this.drawText(text,v-bnds.width/2,this.originY+4)}for(var val=this.min;val<=this.max;val+=this.minor){var v=this.getLoc(val);this.drawLine(v,this.originY-2,v,this.originY+2)}}}},{key:"getLoc",value:function(val){var ival=this.linear?Math.round(this.scale*(val-this.min)):Math.round(Math.log(this.scale*(val-this.min)));return this.vertical?this.originY-ival:this.originX+ival}},{key:"getValue",value:function(v){var factor=this.vertical?(this.originY-v)/this.originY:(v-this.originX)/(this.w-this.originX);return this.min+(this.max-this.min)*factor}},{key:"isInside",value:function(v){return this.vertical?v>=this.originY&&v<=this.originY+this.h:v>=this.originX&&v<=this.originY+this.w}}]),Axis}()},{}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Graph=void 0;var _axis=require("./axis");exports.Graph=function(){function Graph(spec){_classCallCheck(this,Graph),this.stage=spec.stage,this.xaxis=new _axis.Axis({stage:this.stage,label:spec.xlabel,dim:{w:spec.w,h:spec.h,min:spec.minX,max:spec.maxX},orient:"horizontal",scale:spec.xscale,major:spec.majorX,minor:spec.minorX,precision:spec.precisionX}),this.yaxis=new _axis.Axis({stage:this.stage,label:spec.ylabel,dim:{w:spec.w,h:spec.h,min:spec.minY,max:spec.maxY},orient:"vertical",scale:spec.yscale,major:spec.majorY,minor:spec.minorY,precision:spec.precisionY}),this.last=null,this.marker=null,this.color="#000000",this.dotted=!1}return _createClass(Graph,[{key:"setDotted",value:function(dotted){this.dotted=dotted}},{key:"setColor",value:function(color){this.color=color,this.endPlot(),this.marker=new createjs.Shape,this.marker.graphics.beginStroke(color).beginFill(color).drawRect(0,0,4,4),this.marker.x=-10,this.stage.addChild(this.marker)}},{key:"render",value:function(){this.xaxis.render(),this.yaxis.render()}},{key:"clear",value:function(){this.stage.removeAllChildren(),this.endPlot()}},{key:"moveMarker",value:function(x,y){this.marker&&(this.marker.x=x-2,this.marker.y=y-2)}},{key:"drawLine",value:function(x1,y1,x2,y2){var line=new createjs.Shape;this.dotted===!0?line.graphics.setStrokeDash([1,4]).setStrokeStyle(1).beginStroke(this.color).moveTo(x1,y1).lineTo(x2,y2).endStroke():line.graphics.setStrokeStyle(1).beginStroke(this.color).moveTo(x1,y1).lineTo(x2,y2).endStroke(),this.stage.addChild(line)}},{key:"plot",value:function(xv,yv){if(xv>=this.xaxis.min&&xv<=this.xaxis.max&&yv>=this.yaxis.min&&yv<=this.yaxis.max){var x=this.xaxis.getLoc(xv),y=this.yaxis.getLoc(yv);this.last&&(this.moveMarker(this.last.x,this.last.y),this.drawLine(this.last.x,this.last.y,x,y)),this.last=new createjs.Point(x,y),this.moveMarker(x,y)}}},{key:"endPlot",value:function(){this.last=null}}]),Graph}()},{"./axis":2}],4:[function(require,module,exports){"use strict";function getParams(){var params={};return location.search&&location.search.slice(1).split("&").forEach(function(part){var pair=part.split("=");pair[0]=decodeURIComponent(pair[0]),pair[1]=decodeURIComponent(pair[1]),params[pair[0]]="undefined"!==pair[1]?pair[1]:!0}),params}function getStore(){return store.enabled?store:void alert('Local storage is not supported by your browser. Please disable "Private Mode", or upgrade to a modern browser.')}Object.defineProperty(exports,"__esModule",{value:!0});var _graph=require("./graph");Object.defineProperty(exports,"Graph",{enumerable:!0,get:function(){return _graph.Graph}}),exports.getParams=getParams,exports.getStore=getStore;var store=(require("./json2"),require("./store"))},{"./graph":3,"./json2":5,"./store":6}],5:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(n){return 10>n?"0"+n:n}function this_value(){return this.valueOf()}function quote(string){return rx_escapable.lastIndex=0,rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"===("undefined"==typeof value?"undefined":_typeof(value))&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),"undefined"==typeof value?"undefined":_typeof(value)){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"===("undefined"==typeof rep?"undefined":_typeof(rep)))for(length=rep.length,i=0;length>i;i+=1)"string"==typeof rep[i]&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!==("undefined"==typeof replacer?"undefined":_typeof(replacer))||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"===("undefined"==typeof value?"undefined":_typeof(value)))for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],6:[function(require,module,exports){(function(global){"use strict";module.exports=function(){function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return!1}}var storage,store={},win="undefined"!=typeof window?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script";if(store.disabled=!1,store.version="1.3.20",store.set=function(key,value){},store.get=function(key,defaultVal){},store.has=function(key){return void 0!==store.get(key)},store.remove=function(key){},store.clear=function(){},store.transact=function(key,defaultVal,transactionFn){null==transactionFn&&(transactionFn=defaultVal,defaultVal=null),null==defaultVal&&(defaultVal={});var val=store.get(key,defaultVal);transactionFn(val),store.set(key,val)},store.getAll=function(){var ret={};return store.forEach(function(key,val){ret[key]=val}),ret},store.forEach=function(){},store.serialize=function(value){return JSON.stringify(value)},store.deserialize=function(value){if("string"==typeof value)try{return JSON.parse(value)}catch(e){return value||void 0}},isLocalStorageNameSupported())storage=win[localStorageName],store.set=function(key,val){return void 0===val?store.remove(key):(storage.setItem(key,store.serialize(val)),val)},store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return void 0===val?defaultVal:val},store.remove=function(key){storage.removeItem(key)},store.clear=function(){storage.clear()},store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}};else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile"),storageContainer.open(),storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>'),storageContainer.close(),storageOwner=storageContainer.w.frames[0].document,storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div"),storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage),storageOwner.appendChild(storage),storage.addBehavior("#default#userData"),storage.load(localStorageName);var result=storeFunction.apply(store,args);return storageOwner.removeChild(storage),result}},forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){return key=ieKeyFix(key),void 0===val?store.remove(key):(storage.setAttribute(key,store.serialize(val)),storage.save(localStorageName),val)}),store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return void 0===val?defaultVal:val}),store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key),storage.removeAttribute(key),storage.save(localStorageName)}),store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--)storage.removeAttribute(attributes[i].name);storage.save(localStorageName)}),store.forEach=withIEStorage(function(storage,callback){for(var attr,attributes=storage.XMLDocument.documentElement.attributes,i=0;attr=attributes[i];++i)callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))})}try{var testKey="__storejs__";store.set(testKey,testKey),store.get(testKey)!=testKey&&(store.disabled=!0),store.remove(testKey)}catch(e){store.disabled=!0}return store.enabled=!store.disabled,store}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);